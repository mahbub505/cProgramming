/*1326087237,176833975*/

if (window.CavalryLogger) { CavalryLogger.start_js(["6+ejg"]); }

__d("UntrustedLink",["copyProperties","event-extensions","uri"],function(f,h,i,g,e){var d=h("copyProperties");var a=h("event-extensions");var b=h("uri");function c(j,m,k,l){this.dom=j;this.url=j.href;this.hash=m;this.func_get_params=l||function(){return {};};Event.listen(this.dom,'click',this.onclick.bind(this));Event.listen(this.dom,'mousedown',this.onmousedown.bind(this));Event.listen(this.dom,'mouseup',this.onmouseup.bind(this));Event.listen(this.dom,'mouseout',this.onmouseout.bind(this));this.onmousedown(a.$E(k));}c.bootstrap=function(j,m,k,l){if(j.__untrusted)return;j.__untrusted=true;new c(j,m,k,l);};c.prototype.getRewrittenURI=function(){var j=d({u:this.url,h:this.hash},this.func_get_params(this.dom));var k=new b('/l.php');return k.setQueryData(j).setSubdomain('www').setProtocol('http');};c.prototype.onclick=function(){(function(){this.dom.href=this.url;}).bind(this).defer(100);this.dom.href=this.getRewrittenURI();};c.prototype.onmousedown=function(j){if(j.button==2)this.dom.href=this.getRewrittenURI();};c.prototype.onmouseup=function(){this.dom.href=this.getRewrittenURI();};c.prototype.onmouseout=function(){this.dom.href=this.url;};g.exports=c;});